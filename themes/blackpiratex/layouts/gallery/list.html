{{ partial "header.html" . }}

<div id="app-root">

    <div class="blog-hero">
        <h1>Visuals</h1>
        <p>Snapshots, sketches, and moments frozen in time.</p>
    </div>

    {{ $url := "https://gallery.blackpiratex.com/index.json" }}
    
    {{ $data := slice }}

    {{ with try (resources.GetRemote $url) }}
        {{ if .Err }}
            {{ warnf "Unable to fetch gallery JSON: %s" .Err }}
        {{ else with .Value }}
            {{ $data = . | transform.Unmarshal }}
        {{ end }}
    {{ else }}
        {{ warnf "Unable to attempt fetch for gallery JSON" }}
    {{ end }}

    <div class="home-section" style="margin-top: 40px;">
        
        <div class="gallery-grid">
            {{ range $data }}
            <a href="{{ .image.original }}" target="_blank" class="gallery-card">
                
                <div class="gallery-img-container">
                    {{ $imgSrc := .image.thumbnail | default .image.original }}
                    <img src="{{ $imgSrc }}" alt="{{ .title }}" loading="lazy">
                    
                    <div class="gallery-overlay">
                        <i data-lucide="maximize-2" width="24" color="#fff"></i>
                    </div>
                </div>

                <div class="gallery-content">
                    <div class="gallery-meta">
                        <span>{{ .date }}</span>
                        {{ if .album }}
                        <span>â€¢ {{ .album }}</span>
                        {{ end }}
                    </div>
                    
                    <h3 class="gallery-title">{{ .title }}</h3>

                    {{ if .tags }}
                    <div class="gallery-tags">
                        {{ range .tags }}
                        <span class="gallery-tag">#{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </a>
            {{ end }}
        </div>

        {{ if eq (len $data) 0 }}
        <div style="padding: 40px; text-align: center; color: #666; border: 1px dashed #ccc; border-radius: 8px;">
            No images found (or unable to fetch remote gallery).
        </div>
        {{ end }}

    </div>
</div>

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>

{{ partial "footer.html" . }}