{{ partial "header.html" . }}

<div id="post">
    <div id="wrapper">
        <article class="norm">
            <h2 id="title">Visuals</h2>
            <p class="thoughts-meta">Snapshots, sketches, and moments frozen in time.</p>

            {{ $featured := where .Pages "Params.featured" true }}
            {{ $featuredSorted := sort $featured "Params.weight" "asc" }}
            {{ $regular := where .Pages "Params.featured" "ne" true }}

            {{ if gt (len $featuredSorted) 0 }}
            <div class="writeas-gallery-group">
                <h3 class="writeas-gallery-title">Featured</h3>
                <div class="writeas-masonry">
                    {{ range $featuredSorted }}
                    <a href="{{ .RelPermalink }}" class="writeas-masonry-item">
                        {{ $imgSrc := .Params.image.thumbnail.url | default .Params.image.original.url }}
                        <img src="{{ $imgSrc }}" alt="{{ .Title }}" loading="lazy">
                    </a>
                    {{ end }}
                </div>
            </div>
            {{ end }}

            {{ range $regular.GroupByDate "2006" }}
            <div class="writeas-gallery-group">
                <h3 class="writeas-gallery-title">{{ .Key }}</h3>
                <div class="writeas-masonry">
                    {{ range .Pages }}
                    <a href="{{ .RelPermalink }}" class="writeas-masonry-item">
                        {{ $imgSrc := .Params.image.thumbnail.url | default .Params.image.original.url }}
                        <img src="{{ $imgSrc }}" alt="{{ .Title }}" loading="lazy">
                    </a>
                    {{ end }}
                </div>
            </div>
            {{ end }}
        </article>
    </div>
</div>

{{ partial "footer.html" . }}
