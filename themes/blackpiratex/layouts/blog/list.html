{{ partial "header.html" . }}

<div id="app-root">
    
    {{ $blogPosts := sort (where .Site.RegularPages "Section" "blog") "Date" "desc" }}

    <div class="blog-hero">
        <h1>Writings & Notes</h1>
        <p>A collection of thoughts, tutorials, and updates.</p>
    </div>

    <div class="blog-controls">
        <a href="/search" class="search-icon-link" title="Search articles">
            <i data-lucide="search" width="18"></i>
        </a>
        
        <div class="stats-pill">
            <i data-lucide="file-text" width="14"></i>
            <span>{{ len $blogPosts }} Posts</span>
        </div>
    </div>
    
    <div id="search-results"></div>

    <div class="home-section" style="margin-top: 40px;">
        <h2 style="border-bottom: 1px solid var(--border-strong); padding-bottom: 10px; margin-bottom: 25px;">
            <i data-lucide="list" width="20"></i> All Posts
        </h2>
        
        <ul class="bearblog-list">
            {{ range $blogPosts }}
            <li class="bearblog-item">
                <span class="bearblog-date">{{ .Date.Format "2006-01-02" }}</span>
                <div class="bearblog-main">
                    <a href="{{ .RelPermalink }}" class="bearblog-link">{{ .Title }}</a>
                    {{ if .Params.tags }}
                    <span class="bearblog-tags">
                        {{ range $index, $tag := .Params.tags }}
                            {{ if gt $index 0 }}<span class="bearblog-tag-sep">/</span>{{ end }}
                            <a class="bearblog-tag" href="{{ "/tags/" | relLangURL }}{{ $tag | urlize }}">#{{ $tag }}</a>
                        {{ end }}
                    </span>
                    {{ end }}
                </div>
            </li>
            {{ end }}
        </ul>

        {{ if eq (len $blogPosts) 0 }}
        <div style="padding: 40px; text-align: center; color: var(--text-muted); border: 1px dashed var(--border-color); border-radius: 8px;">
            No posts found yet.
        </div>
        {{ end }}
    </div>

    <div class="tag-cloud-section">
        <h4 style="margin-bottom: 15px; display:flex; align-items:center; gap:8px;">
            <i data-lucide="tag" width="14"></i> Topics
        </h4>
        <div class="tag-cloud-list">
            {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
            <a href="{{ "/tags/" | relLangURL }}{{ $name | urlize }}" class="tag-cloud-item">
                {{ $name | title }} <span style="color:var(--text-muted); font-size:10px;">({{ $taxonomy.Count }})</span>
            </a>
            {{ end }}
        </div>
    </div>

</div>

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>
<script src="{{ "js/search.js" | relURL }}"></script>

{{ partial "footer.html" . }}
