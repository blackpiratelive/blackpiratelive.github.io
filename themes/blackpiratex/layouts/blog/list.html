{{ partial "header.html" . }}

<div id="app-root">
    
    {{ $blogPosts := where .Site.RegularPages "Section" "blog" }}

    <div class="blog-hero">
        <h1>Writings & Notes</h1>
        <p>A collection of thoughts, tutorials, and updates.</p>
    </div>

    <div class="blog-controls">
        <a href="/search" class="search-icon-link" title="Search articles">
            <i data-lucide="search" width="18"></i>
        </a>
        
        <div class="stats-pill">
            <i data-lucide="file-text" width="14"></i>
            <span>{{ len $blogPosts }} Posts</span>
        </div>
    </div>
    
    <div id="search-results"></div>

    <div class="home-section" style="margin-top: 40px;">
        <h2 style="border-bottom: 1px solid #000; padding-bottom: 10px; margin-bottom: 25px;">
            <i data-lucide="list" width="20"></i> Latest Posts
        </h2>
        
        <div class="blog-list">
            {{ $paginator := .Paginate $blogPosts }}
            
            {{ range $paginator.Pages }}
            <a href="{{ .RelPermalink }}" class="blog-list-item">
                
                <h3 class="blog-item-title">{{ .Title }}</h3>
                
                <div class="blog-item-meta">
                    <span class="meta-pill">
                        <i data-lucide="calendar" width="12"></i> {{ .Date.Format "Jan 02, 2006" }}
                    </span>
                    <span class="meta-pill">
                        <i data-lucide="user" width="12"></i> {{ .Params.author | default "Sudip" }}
                    </span>
                    <span class="meta-pill">
                        <i data-lucide="clock" width="12"></i> {{ .ReadingTime }} min read
                    </span>
                    <span class="meta-pill">
                        <i data-lucide="align-left" width="12"></i> {{ .WordCount }} words
                    </span>
                </div>

                <p class="blog-item-summary">
                    {{ .Summary | plainify | truncate 180 }}
                </p>
                
                {{ if .Params.tags }}
                <div style="margin-top: 8px;">
                     <span style="font-size:11px; color:#888;">#{{ index .Params.tags 0 }}</span>
                </div>
                {{ end }}
            </a>
            {{ end }}
        </div>

        {{ if eq (len $paginator.Pages) 0 }}
        <div style="padding: 40px; text-align: center; color: #666; border: 1px dashed #ccc; border-radius: 8px;">
            No posts found yet.
        </div>
        {{ end }}
    </div>

    {{ if gt $paginator.TotalPages 1 }}
    <div class="pagination">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="page-link">← Newer Posts</a>
        {{ end }}
        
        <span style="color:#666; font-size: 12px;">Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}</span>
        
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="page-link">Older Posts →</a>
        {{ end }}
    </div>
    {{ end }}

    <div class="tag-cloud-section">
        <h4 style="margin-bottom: 15px; display:flex; align-items:center; gap:8px;">
            <i data-lucide="tag" width="14"></i> Topics
        </h4>
        <div class="tag-cloud-list">
            {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
            <a href="{{ "/tags/" | relLangURL }}{{ $name | urlize }}" class="tag-cloud-item">
                {{ $name | title }} <span style="color:#666; font-size:10px;">({{ $taxonomy.Count }})</span>
            </a>
            {{ end }}
        </div>
    </div>

</div>

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>
<script src="{{ "js/search.js" | relURL }}"></script>

{{ partial "footer.html" . }}