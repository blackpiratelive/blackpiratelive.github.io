{{ partial "header.html" . }}

<div id="app-root">
    
    {{ $blogPosts := where .Site.RegularPages "Section" "blog" }}

    <div class="blog-hero">
        <h1>Writings & Notes</h1>
        <p>A collection of thoughts, tutorials, and updates.</p>
    </div>

    <div class="blog-controls">
        <div class="search-wrapper" style="margin-bottom: 0; flex-grow: 1;">
            <i data-lucide="search" width="16" style="color:#999; margin-right:10px;"></i>
            <input type="text" id="search-input" class="search-input" placeholder="Search articles...">
        </div>
        
        <div class="stats-pill">
            <i data-lucide="file-text" width="14"></i>
            <span>{{ len $blogPosts }} Posts</span>
        </div>
    </div>
    
    <div id="search-results"></div>

    <div class="home-section" style="margin-top: 40px;">
        <h2>
            <i data-lucide="grid" width="20"></i> Latest Posts
        </h2>
        
        <div class="blog-grid">
            {{ $paginator := .Paginate $blogPosts }}
            
            {{ range $paginator.Pages }}
            <a href="{{ .RelPermalink }}" class="blog-card">
                <div class="blog-card-header">
                    <span class="blog-date">
                        <i data-lucide="calendar" width="12"></i> {{ .Date.Format "Jan 02, 2006" }}
                    </span>
                    <span class="blog-read-time">
                        {{ .ReadingTime }} min read
                    </span>
                </div>
                
                <h3 class="blog-card-title">{{ .Title }}</h3>
                
                <p class="blog-card-summary">
                    {{ .Summary | truncate 140 }}
                </p>

                <div class="blog-card-footer">
                    {{ if .Params.tags }}
                        <span class="tag-badge">#{{ index .Params.tags 0 }}</span>
                    {{ end }}
                    <span class="read-more">Read <i data-lucide="arrow-right" width="12"></i></span>
                </div>
            </a>
            {{ end }}
        </div>

        {{ if eq (len $paginator.Pages) 0 }}
        <div style="padding: 40px; text-align: center; color: #666; border: 1px dashed #ccc; border-radius: 8px;">
            No posts found yet.
        </div>
        {{ end }}
    </div>

    {{ if gt $paginator.TotalPages 1 }}
    <div class="pagination">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="page-link">← Newer Posts</a>
        {{ end }}
        
        <span style="color:#666; font-size: 12px;">Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}</span>
        
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="page-link">Older Posts →</a>
        {{ end }}
    </div>
    {{ end }}

    <div class="tag-cloud-section">
        <h4 style="margin-bottom: 15px; display:flex; align-items:center; gap:8px;">
            <i data-lucide="tag" width="14"></i> Topics
        </h4>
        <div class="tag-cloud-list">
            {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
            <a href="{{ "/tags/" | relLangURL }}{{ $name | urlize }}" class="tag-cloud-item">
                {{ $name | title }} <span style="color:#666; font-size:10px;">({{ $taxonomy.Count }})</span>
            </a>
            {{ end }}
        </div>
    </div>

</div>

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>
<script src="{{ "js/search.js" | relURL }}"></script>

{{ partial "footer.html" . }}