{{ $isWriteas := or .IsHome (eq .Section "blog") (eq .Section "thoughts") (eq .Section "gallery") (eq .Section "books")
(eq .Section "stats") (eq .Layout "stats") (eq .Layout "on-this-day") (eq .Layout "search") (eq .Layout "page") (eq
.Section "tags") (eq .Kind "taxonomy") (eq .Kind "taxonomyTerm") (eq .Kind "term") }}
{{ if $isWriteas }}
<footer class="writeas-footer">
    <details class="writeas-footer-section" open>
        <summary class="writeas-footer-title">Browse</summary>
        <div class="writeas-footer-links">
            <a href="/projects">Projects</a>
            <a href="https://blog.blackpiratex.com">Blog</a>
            <a href="https://gallery.blackpiratex.com">Gallery</a>
            <a href="https://music.blackpiratex.com">Music</a>
            <a href="https://notes.blackpiratex.com">Notes</a>
            <a href="https://status.blackpiratex.com">Status</a>
            <a href="/bookmarks">Bookmarks</a>
            <a href="/contact">Contact</a>
            <a href="/credits">Credits</a>
            <a href="/about">About</a>
        </div>
    </details>

    <details class="writeas-footer-section">
        <summary class="writeas-footer-title">Follow</summary>
        <div class="writeas-footer-links">
            <a href="https://links.blackpiratex.com/github">Github</a>
            <a href="https://links.blackpiratex.com/pixelfed">Pixelfed</a>
            <a href="https://links.blackpiratex.com/yt">Youtube</a>
            <a href="https://links.blackpiratex.com/mastodon">Mastodon</a>
            <a href="https://links.blackpiratex.com/wa">WhatsApp</a>
            <a href="https://links.blackpiratex.com/last.fm">Last.fm</a>
        </div>
    </details>

    {{ with .Site.Taxonomies.tags }}
    {{ if ne $.Section "books" }}
    <details class="writeas-footer-section">
        <summary class="writeas-footer-title">Tags</summary>
        <div class="writeas-footer-tags">
            {{ range first 24 .ByCount }}
            <a href="{{ .Page.RelPermalink }}">#{{ .Name }}</a>
            {{ end }}
        </div>
    </details>
    {{ end }}
    {{ end }}

    <details class="writeas-footer-section">
        <summary class="writeas-footer-title">Webrings</summary>
        <div class="writeas-footer-links">
            <div class="writeas-webring-row">
                <span class="writeas-webring-name">WebSutra</span>
                <a href="https://webring.blackpiratex.com/api/ring?action=prev&slug=bpx-home">Prev</a>
                <a href="https://webring.blackpiratex.com/api/ring?action=random">Random</a>
                <a href="https://webring.blackpiratex.com/api/ring?action=next&slug=bpx-home">Next</a>
                <span>(Member of <a href="https://webring.blackpiratex.com">WebSutra</a>)</span>
            </div>

            <div class="writeas-webring-row">
                <span class="writeas-webring-name">Hotline</span>
                <a href="https://hotlinewebring.club/bpx/previous">Prev</a>
                <a href="https://hotlinewebring.club">Index</a>
                <a href="https://hotlinewebring.club/bpx/next">Next</a>
            </div>

            <div class="writeas-webring-row">
                <span class="writeas-webring-name">Retronut</span>
                <a href="https://webring.dinhe.net/prev/https://blackpiratex.com">Prev</a>
                <a href="https://webring.dinhe.net">Index</a>
                <a href="https://webring.dinhe.net/next/https://blackpiratex.com">Next</a>
            </div>

            <div class="writeas-webring-row">
                <span class="writeas-webring-name">Bucketfish</span>
                <a href="https://webring.bucketfish.me/redirect.html?to=prev&name=blackpiratex">Prev</a>
                <a href="https://webring.bucketfish.me">Index</a>
                <a href="https://webring.bucketfish.me/redirect.html?to=next&name=blackpiratex">Next</a>
                <a href="https://webring.bucketfish.me/redirect.html?to=random&name=blackpiratex">Random</a>
            </div>

            <div class="writeas-webring-row">
                <span class="writeas-webring-name">Static.Quest</span>
                <a href="https://static.quest/previous/?host=blackpiratex.com">Prev</a>
                <a href="https://static.quest/members">Members</a>
                <a href="https://static.quest/next/?host=blackpiratex.com">Next</a>
                <a href="https://static.quest/random">Lucky?</a>
            </div>

            <div class="writeas-webring-row" id="focusfirst-webring">
                <span class="writeas-webring-name">FocusFirst</span>
                <script type="text/javascript" src="https://www.beepbird.net/webring/onionring-variables.js"></script>
                <script type="text/javascript" src="https://www.beepbird.net/webring/onionring-widget.js"></script>
                <noscript>
                    <a href="https://www.beepbird.net/index.html">Focus First Index</a>
                </noscript>
            </div>
        </div>
    </details>

    <div class="writeas-footer-credits">
        <p>Uses self hosted Umami analytics.</p>
        <p>
            &copy; 2026 BlackPirateX. Website made using <a href="https://gohugo.io">Hugo</a> and Love on Android.
            Follow on <a rel="me" href="https://mastodon.social/@pizzle">Mastodon</a>.
        </p>
    </div>
    <script defer src="https://u-one-livid.vercel.app/script.js"
        data-website-id="80888a44-8645-40c5-9c06-a1e5a2da24fc"></script>

    <!-- Reading Progress Bar Script -->
    <script>
        (function () {
            const progressBar = document.getElementById('reading-progress');
            if (!progressBar) return;

            function updateProgress() {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
                progressBar.style.width = Math.min(progress, 100) + '%';
            }

            window.addEventListener('scroll', updateProgress, { passive: true });
            updateProgress();
        })();
    </script>
</footer>
{{ else }}
<footer class="footer-container">
    <!-- Footer Navigation Grid -->
    <div class="footer-nav-grid">
        <!-- Browse Column -->
        <div class="footer-column">
            <h4 class="footer-heading">
                <i data-lucide="compass" width="14"></i> Browse
            </h4>
            <div class="footer-links">
                <a href="/projects">
                    <i data-lucide="folder-code" width="12" style="margin-right: 6px;"></i>
                    Projects
                </a>
                <a href="https://blog.blackpiratex.com">
                    <i data-lucide="book-open" width="12" style="margin-right: 6px;"></i>
                    Blog
                </a>
                <a href="https://gallery.blackpiratex.com">
                    <i data-lucide="image" width="12" style="margin-right: 6px;"></i>
                    Gallery
                </a>
                <a href="https://music.blackpiratex.com">
                    <i data-lucide="music" width="12" style="margin-right: 6px;"></i>
                    Music
                </a>
                <a href="https://notes.blackpiratex.com">
                    <i data-lucide="sticky-note" width="12" style="margin-right: 6px;"></i>
                    Notes
                </a>
                <a href="https://status.blackpiratex.com">
                    <i data-lucide="activity" width="12" style="margin-right: 6px;"></i>
                    Status
                </a>
                <a href="/bookmarks">
                    <i data-lucide="bookmark" width="12" style="margin-right: 6px;"></i>
                    Bookmarks
                </a>
                <a href="/contact">
                    <i data-lucide="mail" width="12" style="margin-right: 6px;"></i>
                    Contact
                </a>
                <a href="/credits">
                    <i data-lucide="award" width="12" style="margin-right: 6px;"></i>
                    Credits
                </a>
                <a href="/about">
                    <i data-lucide="user" width="12" style="margin-right: 6px;"></i>
                    About
                </a>
            </div>
        </div>

        <!-- Follow Column -->
        <div class="footer-column">
            <h4 class="footer-heading">
                <i data-lucide="user-plus" width="14"></i> Follow
            </h4>
            <div class="footer-links">
                <a href="https://links.blackpiratex.com/github">
                    <i data-lucide="github" width="12" style="margin-right: 6px;"></i>
                    Github
                </a>
                <a href="https://links.blackpiratex.com/pixelfed">
                    <i data-lucide="camera" width="12" style="margin-right: 6px;"></i>
                    Pixelfed
                </a>
                <a href="https://links.blackpiratex.com/yt">
                    <i data-lucide="youtube" width="12" style="margin-right: 6px;"></i>
                    Youtube
                </a>
                <a href="https://links.blackpiratex.com/mastodon">
                    <i data-lucide="megaphone" width="12" style="margin-right: 6px;"></i>
                    Mastodon
                </a>
                <a href="https://links.blackpiratex.com/wa">
                    <i data-lucide="message-circle" width="12" style="margin-right: 6px;"></i>
                    WhatsApp
                </a>
                <a href="https://links.blackpiratex.com/last.fm">
                    <i data-lucide="headphones" width="12" style="margin-right: 6px;"></i>
                    Last.fm
                </a>
            </div>
        </div>
    </div>

    {{ with .Site.Taxonomies.tags }}
    {{ if ne $.Section "books" }}
    <div class="footer-tag-cloud">
        <h4 class="footer-heading">
            <i data-lucide="tag" width="14"></i> Tags
        </h4>
        <div class="footer-tag-list">
            {{ range first 24 .ByCount }}
            <a href="{{ .Page.RelPermalink }}" class="footer-tag-item">#{{ .Name }}</a>
            {{ end }}
        </div>
    </div>
    {{ end }}
    {{ end }}

    <!-- Webrings Section -->
    <div class="webring-section">
        <h4
            style="border-bottom: 1px dotted var(--border-color); margin-top:0; margin-bottom: 10px; font-size: 12px; font-weight: bold;">
            <i data-lucide="globe" width="12"></i> WEBRINGS
        </h4>

        <div class="webring-row">
            <span class="webring-label">
                <i data-lucide="link" width="11" style="margin-right: 4px; vertical-align: middle;"></i>
                WebSutra
            </span>
            <a href="https://webring.blackpiratex.com/api/ring?action=prev&slug=bpx-home">
                <i data-lucide="chevron-left" width="11"></i> Prev
            </a>
            <a href="https://webring.blackpiratex.com/api/ring?action=random">
                <i data-lucide="shuffle" width="11"></i> Random
            </a>
            <a href="https://webring.blackpiratex.com/api/ring?action=next&slug=bpx-home">
                Next <i data-lucide="chevron-right" width="11"></i>
            </a>
            <span>(Member of <a href="https://webring.blackpiratex.com">WebSutra</a>)</span>
        </div>

        <div class="webring-row">
            <span class="webring-label">
                <i data-lucide="link" width="11" style="margin-right: 4px; vertical-align: middle;"></i>
                Hotline
            </span>
            <a href="https://hotlinewebring.club/bpx/previous">
                <i data-lucide="chevron-left" width="11"></i> Prev
            </a>
            <a href="https://hotlinewebring.club">
                <i data-lucide="list" width="11"></i> Index
            </a>
            <a href="https://hotlinewebring.club/bpx/next">
                Next <i data-lucide="chevron-right" width="11"></i>
            </a>
        </div>

        <div class="webring-row">
            <span class="webring-label">
                <i data-lucide="link" width="11" style="margin-right: 4px; vertical-align: middle;"></i>
                Retronut
            </span>
            <a href="https://webring.dinhe.net/prev/https://blackpiratex.com">
                <i data-lucide="chevron-left" width="11"></i> Prev
            </a>
            <a href="https://webring.dinhe.net">
                <i data-lucide="list" width="11"></i> Index
            </a>
            <a href="https://webring.dinhe.net/next/https://blackpiratex.com">
                Next <i data-lucide="chevron-right" width="11"></i>
            </a>
        </div>

        <div class="webring-row">
            <span class="webring-label">
                <i data-lucide="link" width="11" style="margin-right: 4px; vertical-align: middle;"></i>
                Bucketfish
            </span>
            <a href="https://webring.bucketfish.me/redirect.html?to=prev&name=blackpiratex">
                <i data-lucide="chevron-left" width="11"></i> Prev
            </a>
            <a href="https://webring.bucketfish.me">
                <i data-lucide="list" width="11"></i> Index
            </a>
            <a href="https://webring.bucketfish.me/redirect.html?to=next&name=blackpiratex">
                Next <i data-lucide="chevron-right" width="11"></i>
            </a>
            <a href="https://webring.bucketfish.me/redirect.html?to=random&name=blackpiratex">
                <i data-lucide="shuffle" width="11"></i> Random
            </a>
        </div>

        <div class="webring-row">
            <span class="webring-label">
                <i data-lucide="link" width="11" style="margin-right: 4px; vertical-align: middle;"></i>
                Static.Quest
            </span>
            <a href="https://static.quest/previous/?host=blackpiratex.com">
                <i data-lucide="chevron-left" width="11"></i> Prev
            </a>
            <a href="https://static.quest/members">
                <i data-lucide="users" width="11"></i> Members
            </a>
            <a href="https://static.quest/next/?host=blackpiratex.com">
                Next <i data-lucide="chevron-right" width="11"></i>
            </a>
            <a href="https://static.quest/random">
                <i data-lucide="sparkles" width="11"></i> Lucky?
            </a>
        </div>

        <div class="webring-row" id='focusfirst-webring'>
            <span class="webring-label">
                <i data-lucide="link" width="11" style="margin-right: 4px; vertical-align: middle;"></i>
                FocusFirst
            </span>

            <script type="text/javascript" src="https://www.beepbird.net/webring/onionring-variables.js"></script>
            <script type="text/javascript" src="https://www.beepbird.net/webring/onionring-widget.js"></script>
            <noscript>
                <a href='https://www.beepbird.net/index.html'>
                    <i data-lucide="list" width="11"></i> Focus First Index
                </a>
            </noscript>
        </div>
    </div>

    <!-- Footer Credits -->
    <div class="footer-credits">
        <p>
            <i data-lucide="bar-chart-3" width="12" style="vertical-align: middle;"></i>
            Uses self hosted Umami analytics.
        </p>
        <p>
            <i data-lucide="heart" width="12" style="vertical-align: middle; color: #e74c3c;"></i>
            &copy; 2026 BlackPirateX. Website made using <a href="https://gohugo.io">Hugo</a> and Love on Android.
            Follow on <a rel="me" href="https://mastodon.social/@pizzle">Mastodon</a>.
        </p>
    </div>
</footer>
<script>
    lucide.createIcons();
</script>
{{ end }}
<script>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("{{ "sw.js" | relURL }}").catch((error) => {
                console.warn("Service worker registration failed:", error);
            });
        });
    }
</script>
<script>
    (function () {
        if (!("HTMLLinkElement" in window)) {
            return;
        }

        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (connection && (connection.saveData || /2g/.test(connection.effectiveType || ""))) {
            return;
        }

        const prefetched = new Set();

        const shouldPrefetch = (href) => {
            if (!href || href.startsWith("#") || href.startsWith("mailto:") || href.startsWith("tel:")) {
                return false;
            }
            let url;
            try {
                url = new URL(href, window.location.href);
            } catch (error) {
                return false;
            }
            if (url.origin !== window.location.origin) {
                return false;
            }
            if (url.pathname === window.location.pathname && url.search === window.location.search) {
                return false;
            }
            return true;
        };

        document.addEventListener(
            "mouseover",
            (event) => {
                const anchor = event.target.closest("a[href]");
                if (!anchor) {
                    return;
                }

                const href = anchor.getAttribute("href");
                if (!shouldPrefetch(href)) {
                    return;
                }

                const url = new URL(href, window.location.href).href;
                if (prefetched.has(url)) {
                    return;
                }

                prefetched.add(url);
                const link = document.createElement("link");
                link.rel = "prefetch";
                link.as = "document";
                link.href = url;
                document.head.appendChild(link);
            },
            { passive: true }
        );
    })();
</script>
<script defer src="https://u-one-livid.vercel.app/script.js"
    data-website-id="80888a44-8645-40c5-9c06-a1e5a2da24fc"></script>