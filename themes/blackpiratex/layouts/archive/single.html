<!DOCTYPE html>
<html lang="en">
<head>
    {{ partial "head.html" . }}
</head>
<body>
    <header>
        <h1>{{ .Title }}</h1>
        <p class="subtitle">
            All posts from {{ .Title }}
            <span class="separator">·</span>
            <a href="/archive">← All years</a>
        </p>
    </header>
    
    <main>
        {{ $year := int .Title }}
        {{ $allPages := where site.Pages "Kind" "page" }}
        {{ $posts := where $allPages "Date.Year" $year }}
        
        {{ if gt (len $posts) 0 }}
        <div class="year-stats">
            <p><strong>{{ len $posts }}</strong> {{ cond (eq (len $posts) 1) "post" "posts" }} in {{ .Title }}</p>
        </div>
        
        {{ range $posts.ByDate.Reverse }}
        <article>
            <div class="post-content">
                {{ .Content }}
            </div>
            <div class="post-meta">
                <div class="post-meta-left">
                    <div class="post-meta-item">
                        <span class="meta-label">Date:</span> 
                        <time class="post-date">{{ .Date.Format "January 2, 2006 at 3:04 PM" }}</time>
                    </div>
                    {{ if .Params.tags }}
                    <div class="post-meta-item">
                        <span class="meta-label">Tags:</span>
                        <span class="post-tags">
                            {{ range .Params.tags }}
                            <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="tag">{{ . }}</a>
                            {{ end }}
                        </span>
                    </div>
                    {{ end }}
                </div>
                <a href="{{ .Permalink }}" class="post-permalink">→</a>
            </div>
        </article>
        
        {{ if not (eq . (index $posts (sub (len $posts) 1))) }}
        <hr>
        {{ end }}
        {{ end }}
        
        {{ else }}
        <p>No posts found for {{ .Title }}.</p>
        {{ end }}
    </main>
    
    {{ partial "footer.html" . }}
</body>
</html>