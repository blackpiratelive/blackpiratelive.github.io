{{ partial "header.html" . }}

{{ $started := "" }}
{{ with .Params.startedOn }}
    {{ $started = (time.AsTime .).Format "Jan 2, 2006" }}
{{ end }}
{{ $finished := "" }}
{{ with .Params.finishedOn }}
    {{ $finished = (time.AsTime .).Format "Jan 2, 2006" }}
{{ end }}
{{ $published := .Params.fullPublishDate | default .Params.publishedDate }}

<div id="post">
    <div id="wrapper">
        <article class="norm writeas-gallery-single">
            <p><a href="{{ "/books/" | relURL }}">&larr; Back to Books</a></p>

            <div class="writeas-gallery-image book-cover-frame">
                {{ with .Params.cover }}
                <img src="{{ . }}" alt="Cover for {{ $.Title }}" loading="lazy">
                {{ else }}
                <div class="book-cover-fallback">No cover</div>
                {{ end }}
            </div>

            <h2 id="title">{{ .Title }}</h2>
            {{ with .Params.authors }}
            <p class="book-authors">{{ delimit . ", " }}</p>
            {{ end }}

            <div class="writeas-gallery-meta">
                {{ with .Params.shelf }}
                <span>Shelf: {{ . }}</span>
                {{ end }}
                {{ with .Params.readingMedium }}
                <span>Medium: {{ . }}</span>
                {{ end }}
                {{ with .Params.pageCount }}
                <span>{{ . }} pages</span>
                {{ end }}
                {{ if ne $started "" }}
                <span>Started: {{ $started }}</span>
                {{ end }}
                {{ if ne $finished "" }}
                <span>Finished: {{ $finished }}</span>
                {{ end }}
                {{ with $published }}
                <span>Published: {{ . }}</span>
                {{ end }}
                {{ with .Params.publisher }}
                <span>Publisher: {{ . }}</span>
                {{ end }}
                {{ with .Params.readingProgress }}
                <span>Progress: {{ . }}%</span>
                {{ end }}
            </div>

            {{ if .Content }}
            <div class="writeas-gallery-description">
                {{ .Content }}
            </div>
            {{ end }}

            {{ with .Params.highlights }}
            {{ if gt (len .) 0 }}
            <section class="writeas-section">
                <h3 class="writeas-section-title">Highlights</h3>
                <ol class="book-highlights">
                    {{ range . }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ol>
            </section>
            {{ end }}
            {{ end }}
        </article>
    </div>
</div>

{{ partial "footer.html" . }}
