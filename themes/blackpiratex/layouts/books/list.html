{{ partial "header.html" . }}

{{ $pages := sort .Pages "Date" "desc" }}

<div id="post">
    <div id="wrapper">
        <article class="norm">
            <h2 id="title">{{ .Title | default "Books" }}</h2>
            {{ if .Content }}
            <div class="thoughts-meta">
                {{ .Content }}
            </div>
            {{ end }}
            <p class="thoughts-meta">{{ len $pages }} books</p>

            <div class="writeas-gallery-group">
                <div class="writeas-masonry books-masonry">
                    {{ range $pages }}
                    {{ $book := . }}
                    <a class="writeas-masonry-item books-masonry-item" href="{{ $book.RelPermalink }}">
                        {{ with $book.Params.cover }}
                        <img src="{{ . }}" alt="Cover for {{ $book.Title }}" loading="lazy">
                        {{ else }}
                        <div class="book-cover-fallback">No cover</div>
                        {{ end }}
                        <div class="book-cover-meta">
                            <span class="book-cover-title">{{ $book.Title }}</span>
                            {{ with $book.Params.authors }}
                            <span class="book-cover-author">{{ delimit . ", " }}</span>
                            {{ end }}
                        </div>
                    </a>
                    {{ end }}
                </div>
            </div>

            {{ if eq (len $pages) 0 }}
            <p>No books found yet.</p>
            {{ end }}
        </article>
    </div>
</div>

{{ partial "footer.html" . }}
