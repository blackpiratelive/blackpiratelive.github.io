<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .Title }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>
    <link rel="stylesheet" href="/css/micro.css">
    
    <!-- Open Graph / Social Meta -->
    <meta property="og:title" content="{{ if .Title }}{{ .Title }}{{ else }}Post from {{ .Date.Format "Jan 02, 2006" }}{{ end }}">
    <meta property="og:description" content="{{ .Summary | plainify | truncate 200 }}">
    <meta property="og:type" content="article">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <a href="/" class="header-title">
            <span>{{ .Site.Title }}</span>
        </a>
        {{ with .Site.Params.subtitle }}
        <p class="header-subtitle">{{ . }}</p>
        {{ end }}
        
        <!-- Navigation -->
        <nav class="nav-bar">
            <a href="/" class="nav-link">
                <i data-lucide="home" width="14"></i> Home
            </a>
            <span class="nav-separator">·</span>
            <a href="/thoughts/" class="nav-link">
                <i data-lucide="message-circle" width="14"></i> Thoughts
            </a>
            {{ range .Site.Menus.main }}
            <span class="nav-separator">·</span>
            <a href="{{ .URL }}" class="nav-link">{{ .Name }}</a>
            {{ end }}
        </nav>
    </header>

    <!-- Back Button -->
    <a href="/thoughts/" class="back-btn">
        <i data-lucide="arrow-left" width="16"></i>
        Back to all thoughts
    </a>

    <!-- Single Post Container -->
    <article class="detail-container">
        <!-- Title (only if exists) -->
        {{ if .Title }}
        <h1 class="detail-title">{{ .Title }}</h1>
        {{ end }}

        <!-- Post Meta Bar -->
        <div class="post-meta-bar">
            <span class="meta-item">
                <i data-lucide="calendar" width="14"></i>
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format "January 02, 2006" }}
                </time>
            </span>
            
            <span class="meta-item">
                <i data-lucide="clock" width="14"></i>
                {{ .ReadingTime }} min read
            </span>

            {{ if .Params.tags }}
            <span class="meta-item">
                <i data-lucide="tag" width="14"></i>
                {{ range $index, $tag := .Params.tags }}
                    {{ if $index }}, {{ end }}
                    <a href="/tags/{{ $tag | urlize }}" style="color: inherit;">{{ $tag }}</a>
                {{ end }}
            </span>
            {{ end }}
        </div>

        <!-- Excerpt Box (if exists) -->
        {{ with .Params.excerpt }}
        <div class="detail-excerpt">
            {{ . }}
        </div>
        {{ end }}

        <!-- Post Content -->
        <div class="single-content">
            {{ .Content }}
        </div>

        <!-- Tags (Large display at bottom) -->
        {{ if .Params.tags }}
        <div class="gallery-tags-large" style="margin-top: 30px; padding-top: 20px; border-top: 1px dashed #ccc;">
            {{ range .Params.tags }}
            <a href="/tags/{{ . | urlize }}" class="tag-badge" style="text-decoration: none;">
                {{ . }}
            </a>
            {{ end }}
        </div>
        {{ end }}

        <!-- Webmention / Share Section (Optional) -->
        <div style="margin-top: 40px; padding-top: 30px; border-top: 2px solid #eee;">
            <div style="display: flex; gap: 15px; align-items: center; font-size: 14px;">
                <span style="font-weight: bold; color: #666;">Share:</span>
                <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title | default "Thought" }}" 
                   target="_blank" class="nav-link" style="text-decoration: none;">
                    Twitter
                </a>
                <span class="nav-separator">·</span>
                <a href="https://mastodon.social/share?text={{ .Title | default "Thought" }}%20{{ .Permalink }}" 
                   target="_blank" class="nav-link" style="text-decoration: none;">
                    Mastodon
                </a>
            </div>
        </div>
    </article>

    <!-- Navigation to Previous/Next Posts -->
    <div class="pagination" style="margin-top: 30px;">
        <div>
            {{ with .PrevInSection }}
            <a href="{{ .Permalink }}" class="page-link">
                ← {{ if .Title }}{{ .Title }}{{ else }}Previous{{ end }}
            </a>
            {{ end }}
        </div>
        <div>
            {{ with .NextInSection }}
            <a href="{{ .Permalink }}" class="page-link">
                {{ if .Title }}{{ .Title }}{{ else }}Next{{ end }} →
            </a>
            {{ end }}
        </div>
    </div>

    <!-- Footer -->
    {{ partial "footer.html" . }}

    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>
</body>
</html>
